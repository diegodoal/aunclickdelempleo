@main(){

<h1>Speech Recognition</h1>


    <input type="text" id="name_form" placeholder="Nombre">
    <button id="start-speech-btn" class="btn btn-primary">Recognize</button>


    <script type="text/javascript">
      // Test browser support
      window.SpeechRecognition = window.SpeechRecognition       ||
                                 window.webkitSpeechRecognition ||
                                 null;

      //If not supported, hide button
      if(window.SpeechRecognition === null) {
        document.getElementById('start-speech-btn').setAttribute('class', 'hidden');
      }else{
        var recognizer = new window.SpeechRecognition();
        var input_name = document.getElementById('name_form');

        recognizer.continuous = false;
        recognizer.lang = 'es-ES';
        recognizer.interimResults = false; //Constantly refreshes text while recognition is active

        var start_btn = document.getElementById('start-speech-btn');
        start_btn.addEventListener('click', function(){
          try{
            recognizer.start();
          }catch(ex){
            alert("Error en el reconocimiento de voz: "+ex.value);
          }
        });

        recognizer.onresult = function(event){
          input_name.value = '';
          for(var i = event.resultIndex; i < event.results.length; i++) {
            if(event.results[i].isFinal) {
              input_name.value = event.results[i][0].transcript;
            }else{
              input_name.value += event.results[i][0].transcript;
            }
          }
        };

        recognizer.onerror = function(event) {
          alert("Error en reconocimiento. OnError: "+event.message);
        };
         
      }
    </script>
}