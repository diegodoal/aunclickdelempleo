@(error_login_msg: String)
@main(){
<script type='text/javascript' src="@routes.Assets.at("javascripts/hide_experience.js")"></script>
<article class="container">
    <div class="row">
        <h2 class="red_adecco century_gothic">Conoce tu situación actual</h2>
        <div class="brown_adecco arial size14">
            <p>Lo primero que nos debes facilitar es en qué situación te encuentras actualmente.</p>
        </div><br><br>
        <div class="arial size16 gray_adecco">
            <p>Actividad: Debes seleccionar cual es tu nivel de estudios y completar tu experiencia profesional si la tuvieras.</p>
        </div>
    </div><br>
</article>        

<section class="container back" style="margin: auto;">
    <div class="orientation-points">
            <p class="century_gothic gray_adecco size22 bold" style="margin-left:1em;">¿Cuál es tu nivel de estudios?</p> <br>
        <span id="validate_cb" hidden class="size14 arial red_adecco">Por favor selecciona tu nivel de estudios</span>
        <div class="row">
            <div class="col-md-6 col-md-offset-1">
                <p>
                    <input type="checkbox" id="check1" name="study" onclick="hide_studies(this)" value="No tengo estudios">
                    <label for="check1" class="size14 gray_adecco arial steps_height">No tengo estudios</label>
                </p>
            </div>
            <div class="col-md-5">
                <p>
                    <input type="checkbox" id="check2" name="study" class="study" value="Grado">
                    <label for="check2" class="size14 gray_adecco arial steps_height">Grado</label>
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 col-md-offset-1">
                <p>
                    <input type="checkbox" id="check3" name="study" class="study" value="PCPI / Garantía social">
                    <label for="check3" class="size14 gray_adecco arial steps_height">PCPI / Garantía social</label>
                </p>
            </div>
            <div class="col-md-5">
                <p>
                    <input type="checkbox" id="check4" name="study" class="study" value="Licenciado / Arquitecto / Ingeniero">
                    <label for="check4" class="size14 gray_adecco arial steps_height">Licenciado / Arquitecto / Ingeniero</label>
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 col-md-offset-1">
                <p>
                    <input type="checkbox" id="check5" name="study" class="study" value="Certificado de escolaridad / Graduado en ESO">
                    <label for="check5" class="size14 gray_adecco arial steps_height">Certificado de escolaridad / Graduado en ESO</label>
                </p>
            </div>
            <div class="col-md-5">
                <p>
                    <input type="checkbox" id="check6" name="study" class="study" value="Título propio / Carrera no homolagada">
                    <label for="check6" class="size14 gray_adecco arial steps_height">Título propio / Carrera no homolagada</label>
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 col-md-offset-1">
                <p>
                    <input type="checkbox" id="check7" name="study" class="study" value="BUP / Bachillerato / COU">
                    <label for="check7" class="size14 gray_adecco arial steps_height">BUP / Bachillerato / COU</label>
                </p>
            </div>
            <div class="col-md-5">
                <p>
                    <input type="checkbox" id="check8" name="study" class="study" value="Máster / Título propio de postgrado">
                    <label for="check8" class="size14 gray_adecco arial steps_height">Máster / Título propio de postgrado</label>
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 col-md-offset-1">
                <p>
                    <input type="checkbox" id="check9" name="study" class="study" value="FP 1 / Técnico medio">
                    <label for="check9" class="size14 gray_adecco arial steps_height">FP 1 / Técnico medio</label>
                </p>
            </div>
            <div class="col-md-5">
                <p>
                    <input type="checkbox" id="check10" name="study" class="study" value="Doctorado">
                    <label for="check10" class="size14 gray_adecco arial steps_height">Doctorado</label>
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 col-md-offset-1">
                <p>
                    <input type="checkbox" id="check11" name="study" class="study" value="FP 2 / Técnico superior">
                    <label for="check11" class="size14 gray_adecco arial steps_height">FP 2 / Técnico superior</label>
                </p>
            </div>
            <div class="col-md-5">
                <p>
                    <input type="checkbox" id="check12" name="study" class="study" value="Oposiciones">
                    <label for="check12" class="size14 gray_adecco arial steps_height">Oposiciones</label>
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 col-md-offset-1">
                <p>
                    <input type="checkbox" id="check13" name="study" class="study" value="Diplomado / Arquitecto técnico / Ingeniero técnico">
                    <label for="check13" class="size14 gray_adecco arial steps_height">Diplomado / Arquitecto técnico / Ingeniero técnico</label>
                </p>
            </div>
            <div class="col-md-5">
                <p>
                    <input type="checkbox" id="check14" name="study" class="study" value="Otros Cursos">
                    <label for="check14" class="size14 gray_adecco arial steps_height">Otros Cursos</label>
                </p>
            </div>
        </div>
    </div>

    <div class="row orientation-points">
        <div class="col-md-12 col-sm-12 col-xs-12">
           <p class="century_gothic gray_adecco size22 bold advices_height" style="margin-left:1em;">¿Cuál es tu experiencia profesional?</p> <br>
            <span id="validate_exp_cb" hidden class="size14 arial red_adecco">Por favor selecciona tu experiencia profesional</span>
       </div>
    <div class="row orientation-points" style="margin-left:1em; margin-bottom:1em;">
        <div class="col-md-6">
            <input type="checkbox" id="check_exp" name="check_experience"  value="No tengo experiencia" onclick="ExperienceHidden(this.checked)">
            <label for="check_exp" class="size14 gray_adecco arial steps_height">No tengo experiencia</label>
        </div>
    </div>


    <div class="main-div-sections">
        <div class="panel-group new-input-container center" style="margin-auto;">
            <form id="experience_group" class="form-horizontal" autocomplete="on" method="post" style="padding-left: 2em; padding-right: 2em;">
                <div class="form-group form-inline" id="job_experience_group_1">
                    <div class="col-md-6">
                        <div class="input-mic-container">
                            <input type="text" class="form-control" name="company" placeholder="Empresa" >
                            <img class="img-btn" src="@routes.Assets.at("/images/speech/static-mic.png")">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="input-mic-container">
                            <input type="text" class="form-control"  name="job" placeholder="Puesto" >
                            <img class="img-btn" src="@routes.Assets.at("/images/speech/static-mic.png")">
                        </div>
                    </div>
                </div>

                <div class="form-group form-inline" id="job_experience_group_3">
                    
                    <div class="col-md-6">
                        <select style="width: 100%; margin-left: 0;" class="form-control" name="experience" id="experience">
                                <option value="">Años de experiencia</option>
                                <option value="s1"> Prácticas</option>
                                <option value="s1"> Menos de un año</option>
                                <option value="s2"> 1-3 años</option>
                                <option value="s3"> 3-5 años</option>
                                <option value="s4"> +5 años</option>
                                <option value="s6"> +10 años</option>
                            </select>
                    </div>
                </div>

                <div class="row">
                     <div class="col-md-1 right">
                             <div class="form-group add-other-btn-div button-cursor-pointer" id="job_experience_group_3">
                                <img class="add-new" src="@routes.Assets.at("images/orientation/ic_newinterview.png")">
                             </div>
                     </div>
                 </div>
            </form>
        </div>
    </div>
</section>


<section class="container">
    <div class="row">
        <div class="col-md-8"></div>
        <div class="col-md-4 center">
            <button class="button-finish-1" onclick="sendForm()">FINALIZAR</button>
        </div>
    </div>
</section>

<script type="text/javascript">
      window.onload = function() {
        addNew();
        loadRecognition();
    };
</script>

<script>
    function sendForm(){

    var HtmlRedirect = "";
    var checkboxArray = [];

    //Comprobar y guardar los checkbox en un array checkboxArray

    if ($('input[name="study"]').is(':checked')) {
    $("#validate_cb").hide();
        //Checkboxes
         checkboxArray = [];
        var counter = 0;
        $('input[name="study"]').each(function () {
            if(this.checked){
                checkboxArray[counter] = $(this).val();
                counter++;
            }
        });
        HtmlRedirect = "/orientation";
    }else{
        HtmlRedirect = "/orientation/currentsituation";
        $('#validate_cb').show();
        window.scrollTo(0,0);
    }




    //Comprobar y guardar los campos de experiencia en un array experienceArray
        var experienceArray = [];
        var counter = 0;
        var URLroutes = "";

    if( $('input[name="company"]').val() != "" && $('input[name="job"]').val() != "" && $('select[name="experience"]').val() != "" ){
        $('.main-div-sections .form-horizontal').each(function(){
            var auxExperience = [];
            $(this).find('input').each(function(){
                auxExperience[counter] = $(this).val();
                counter++;
            });
            auxExperience[counter] = $(this).find('select option:selected').text();
            counter = 0;
            experienceArray.push(auxExperience);
        });
          HtmlRedirect = "/orientation";
          URLroutes = "/orientation/currentsituation";

//Comprobar el checkbox de no tengo experiencia y mandar a base de datos
    }else if($('input[name="check_experience"]').is(':checked')){
        $("#validate_exp_cb").hide();
        var experienceArray = [];
        var counter = 0;
        $('input[name="check_experience"]').each(function(){
        if(this.checked){
        experienceArray = $(this).val();
        counter++;
        }
        });
        HtmlRedirect = "/orientation";
        URLroutes = "/orientation/currentsituation/Check";





    }else{
         HtmlRedirect = "/orientation/currentsituation";
         URLroutes = "";
    }

var result = checkboxArray.concat(JSON.stringify(experienceArray));

//Comprobar con el alert si se esta pasando correctamente el checkboxArray
//alert("DATO" +JSON.stringify(checkboxArray));

//alert("DATO EXPERIENCE:"+JSON.stringify(result));

//Pasar a la base de datos
        $.ajax({
        type: 'post',
        data: JSON.stringify(result), //variable que vamos a pasar a la base de datos
        url: URLroutes, //direccion del routes al controlador
        contentType: 'application/json'
    }).done(function(result) {
        console.log(result); //Mostrar en la consola el resultado que se ha guardado en la base de datos
        window.location.assign(HtmlRedirect); //Redireccionar
    });
    }
</script>
}